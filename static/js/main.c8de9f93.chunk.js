(window["webpackJsonpyelp-clone"]=window["webpackJsonpyelp-clone"]||[]).push([[0],{23:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){e.exports=n(47)},39:function(e,t,n){},40:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(20),c=n.n(s),i=(n(39),n(1)),l=n(2),o=n(4),u=n(3),m=n(5),p=(n(40),n(8)),b=n(7),h=function(e,t){return function(n){try{var a=JSON.parse(localStorage.currentUser),r=a.first_name+" "+a.last_name;return e.user=a,e.user_name=r,fetch("http://localhost:3000/api/v1/reviews",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({review:e})}).then((function(e){return e.json()})).then((function(e){n({type:"ADD_REVIEW",payload:[e,t]})}))}catch(s){alert("Please Log In To Be Able Leave A Review.")}}},f=(Object(b.b)((function(e){return{reviews:e.business.reviews}}))(h),n(31)),d=n.n(f),g=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.changeRating=function(e){n.setState({rating:e})},n.handleSubmit=function(e){e.preventDefault(),n.props.postReview(n.state,n.props.reviews);try{var t={first_name:n.state.user.first_name,last_name:n.state.user.last_name,text:n.state.text,rating:n.state.rating};n.props.reviews.unshift(t)}catch(a){}n.setState({text:"",rating:1})},n.state={text:"",rating:1,business:n.props.business},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Leave Review"),r.a.createElement("input",{type:"text",name:"text",value:this.state.text,onChange:this.handleChange}),r.a.createElement(d.a,{min:1,max:5,name:"rating",value:this.state.rating,onChange:this.changeRating}),r.a.createElement("input",{type:"submit",value:"Add Review"})))}}]),t}(a.Component),v=Object(b.b)(null,{postReview:h})(g),E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=function(){return e.props.reviews.filter((function(t){return t.business_id===e.props.business.id}))};return r.a.createElement("div",{className:"reviews"},r.a.createElement("ul",{className:"business-reviews"},t().map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement("li",{style:{width:"300px"},key:e.id},r.a.createElement("h4",null,e.user?e.user.name:e.user_name),"\n",r.a.createElement("p",null,"Rating: ",e.rating),"\n",r.a.createElement("p",null,e.text)))}))),r.a.createElement(v,{reviews:t(),business:this.props.business}))}}]),t}(a.Component),O=Object(b.b)((function(e){return{businesses:e.businesses.businesses,reviews:e.businesses.reviews}}))(E),y=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ol",{id:"allReviews",style:{borderTop:"3px solid rgb(100, 100, 100)",borderBottom:"3px solid rgb(100, 100, 100)"}},r.a.createElement(O,{business:this.props.business,reviews:this.props.reviews})))}}]),t}(a.Component),j=Object(b.b)((function(e){return{reviews:e.businesses.reviews}}))(y),w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClickRevealReviews=function(e){e.preventDefault(),n.refs.btn.setAttribute("disabled","disabled"),n.props.fetchReviews({id:n.props.business.id,name:n.props.business.name})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.business;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{align:"left",key:e.id},r.a.createElement("h4",null,e.name),r.a.createElement("img",{style:{align:"left",width:"500px"},alt:"single business",id:e.name,src:e.image_url}),r.a.createElement("br",null),r.a.createElement("section",null,"Price: ",e.price,r.a.createElement("br",null),"Total Reviews:",e.review_count,r.a.createElement("br",null),"Categories: ",e.categories.map((function(e){return r.a.createElement("ul",{key:e.id}," - ",e.title)})),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("button",{ref:"btn",style:{padding:"15px 32px",textalign:"center",display:"inline-block",fontsize:"16px"},onClick:this.handleClickRevealReviews},"Reviews"),r.a.createElement(j,{business:e})))}}]),t}(a.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("ol",{className:"list-of-businesses"},e.props.businesses.map((function(t){return r.a.createElement(w,{key:t.id,business:t,fetchReviews:e.props.fetchReviews})}))))}}]),t}(a.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"businesses",style:{display:"inline-block"}},r.a.createElement(S,{businesses:this.props.businesses,fetchReviews:this.props.fetchReviews}))}}]),t}(a.Component),C=Object(b.b)((function(e){return{businesses:e.businesses.businesses}}),{fetchReviews:function(e){return function(t){if(t({type:"LOADING_REVIEWS"}),e.name.includes("&")){var n=e.name.indexOf("&"),a=e.name.slice(0,n),r=e.name.slice(n+1,e.name.length);return fetch("http://localhost:3000/api/v1/business_reviews?id=".concat(e.id,"&firstHalf=").concat(a,"&andSign=").concat(" and ","&secondHalf=").concat(r)).then((function(e){return e.json()})).then((function(n){t({type:"FETCH_REVIEWS",payload:[n,e.id]})}))}return fetch("http://localhost:3000/api/v1/business_reviews?id=".concat(e.id,"&name=").concat(e.name)).then((function(e){return e.json()})).then((function(n){t({type:"FETCH_REVIEWS",payload:[n,e.id]})}))}}})(N);n(29);Date.prototype.getUnixTime=function(){return this.getTime()/1e3|0},Date.now||(Date.now=function(){return new Date}),Date.time=function(){return Date.now().getUnixTime()};var _=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="AM",n=function(e){return e>12?(t="PM",e-12):12===e?(t="PM",e):(t="AM",e)},a=function(e){return e<10?"0"+e:e};return r.a.createElement("div",null,e.props.events.map((function(e){var s=new Date(e.time_start),c=s.getHours(),i=s.getMinutes(),l=new Date(e.time_end),o=l.getHours(),u=l.getMinutes();return"string"===typeof e.name?r.a.createElement("li",{className:"event",key:e.id},r.a.createElement("h2",null,e.name),r.a.createElement("img",{alt:"See your Event Live!",src:e.image_url}),r.a.createElement("p",null,e.attending_count," guest(s) are attending","\n",e.description),r.a.createElement("p",null,"From ",n(c),":",a(i)," ",t," to ",n(o),":",a(u)," ",t)):r.a.createElement("div",null)})))}}]),t}(a.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"events-container"},r.a.createElement("ol",{id:"list-of-events"},r.a.createElement(_,{events:this.props.events})))}}]),t}(a.Component),D=Object(b.b)((function(e){return{events:e.events.events}}))(x),k=(n(23),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(e){alert("Have a great day ".concat(n.props.currentUser.first_name)),localStorage.removeItem("currentUser"),n.props.logOutUser(e),window.location.reload(!1)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.currentUser;return null!==t?r.a.createElement("div",{className:"userShowPage"},r.a.createElement("h1",null,t.email),"\n",r.a.createElement("button",{onClick:function(){return e.logout(t.email)}},"Log Out")):null}}]),t}(r.a.Component)),U=Object(b.b)(null,{logOutUser:function(e){return function(t){return fetch("http://localhost:3000/api/v1/logout?email=".concat(e)).then((function(e){return e.json()})).then((function(e){alert(e.message),t({type:"LOGOUT_USER"})}))}}})(k),P=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(C,null),r.a.createElement(D,null),0!==localStorage.length?r.a.createElement(U,{currentUser:JSON.parse(localStorage.currentUser)}):null)}}]),t}(a.Component),R=Object(b.b)((function(e){return{currentUser:e.user.currentUser}}))(P),T=n(16),I=n(32),L=n(19);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=Object(T.c)({businesses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,businesses:[],reviews:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_BUSINESSES":return Object.assign({},F({},e),{loading:!0});case"FETCH_BUSINESSES":return F({},e,{businesses:[].concat(Object(L.a)(e.businesses),[t.payload]).flat(),loading:!1});case"LOADING_REVIEWS":return Object.assign({},F({},e),{loading:!0});case"FETCH_REVIEWS":var n=t.payload[0].map((function(e){return F({},e,{business_id:t.payload[1]})}));return F({},e,{reviews:[].concat(Object(L.a)(e.reviews),[n]).flat(),loading:!1});case"ADD_REVIEW":return F({},e,{reviews:[t.payload[0],t.payload[1]].flat(),loading:!1});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,events:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_EVENT":return Object.assign({},G({},e),{loading:!0});case"FETCH_EVENT":return G({},e,{events:[].concat(Object(L.a)(e.events),[t.payload]).flat(),loading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return B({},e,{currentUser:t.payload});case"LOGOUT_USER":default:return B({},e,{currentUser:null})}}}),W=n(17),M=n(15),Y=(n(45),{term:"",location:""}),z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.fetchBusinesses(n.state),n.setState(Y)},n.state={term:"",location:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"input"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"search-businesses-input"},r.a.createElement("h1",{className:"form-header"},"What Are You Looking For?"),r.a.createElement("h2",{className:"looking-for-header"},"Type of Food:"),r.a.createElement("input",{className:"looking-for-inputbox",type:"text",name:"term",value:this.state.term,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("h2",{className:"location-header"},"Location:"),r.a.createElement("input",{className:"location-inputbox",type:"text",name:"location",value:this.state.location,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit"})))}}]),t}(a.Component),Z=Object(b.b)(null,{fetchBusinesses:function(e){return function(t){return t({type:"LOADING_BUSINESSES"}),fetch("http://localhost:3000/api/v1/search_businesses?term=".concat(e.term,"&location=").concat(e.location)).then((function(e){return e.json()})).then((function(e){t({type:"FETCH_BUSINESSES",payload:e})}))}}})(z);Date.prototype.getUnixTime=function(){return this.getTime()/1e3|0},Date.now||(Date.now=function(){return new Date}),Date.time=function(){return Date.now().getUnixTime()};var q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.fetchEvents(e.state),e.setState({location:""})},e.state={location:"",date:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"event-input-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"zipcode-label"},"Enter Your Zip Code, City or State to find The Featured Events Near You!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{className:"location-label"},"Location:"),r.a.createElement("input",{className:"location-inputbox",type:"text",name:"location",value:this.state.location,onChange:this.handleChange}),r.a.createElement("label",{className:"date-label"},"Date:"),r.a.createElement("input",{className:"date-inputbox",type:"date",name:"date",value:this.state.data,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit"})))}}]),t}(a.Component),K=Object(b.b)(null,{fetchEvents:function(e){var t=new Date(e.date);return function(n){return n({type:"LOADING_EVENT"}),fetch("http://localhost:3000/api/v1/search_events?location=".concat(e.location,"&date=").concat(t.getUnixTime())).then((function(e){return e.json()})).then((function(e){return n({type:"FETCH_EVENT",payload:e})}))}}})(q),Q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createUser(e.state),e.setState({first_name:"",last_name:"",email:"",password:""})},e.state={first_name:"",last_name:"",email:"",password:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup-form"},r.a.createElement("h1",{className:"signup-header"},"Sign Up For An Account"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{className:"first-name-label"},"First Name"),r.a.createElement("input",{className:"first-name-inputbox",name:"first_name",placeholder:"First Name",value:this.state.first_name,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{className:"last-name-label"},"Last Name"),r.a.createElement("input",{className:"last-name-inputbox",name:"last_name",placeholder:"Last Name",value:this.state.last_name,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{className:"email-label"},"Email"),r.a.createElement("input",{className:"email-inputbox",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{className:"password-label"},"Password"),r.a.createElement("input",{className:"password-inputbox",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit",value:"Sign Up"})))}}]),t}(a.Component),X=Object(b.b)(null,{createUser:function(e){return function(t){return fetch("http://localhost:3000/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){e.message?e.message.email&&e.message.password?alert("Email & Password ".concat(e.message.password[0])):e.message.email?alert("Email ".concat(e.message.email[0])):e.message.password&&alert("Password ".concat(e.message.password[0])):(localStorage.setItem("currentUser",JSON.stringify(e)),t({type:"LOGIN_USER",payload:e}))}))}}})(Q),$=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.loginUser(e.state),e.setState({email:"",password:""})},e.state={email:"",password:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"login-header"},"Login"),r.a.createElement("label",{className:"email-label"},"Email"),r.a.createElement("input",{className:"email-inputbox",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{className:"password-label"},"Password"),r.a.createElement("input",{className:"password-inputbox",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit",value:"Log In"})))}}]),t}(a.Component),ee=Object(b.b)(null,{loginUser:function(e){return function(t){return e.email=e.email.slice(0,e.email.length-4),fetch("http://localhost:3000/api/v1/users/".concat(JSON.stringify({user:e}))).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):(localStorage.setItem("currentUser",JSON.stringify(e)),t({type:"LOGIN_USER",payload:e}))}))}}})($),te=Object(T.d)(J,Object(T.a)(I.a)),ne={width:"100px",padding:"12px",margin:"0 6px 6px",background:"black",textDecoration:"none",color:"white",position:"relative"};c.a.render(r.a.createElement(b.a,{store:te},r.a.createElement(R,null),r.a.createElement(W.a,null,r.a.createElement((function(){return r.a.createElement("div",{id:"navbar"},r.a.createElement(W.b,{to:"/",exact:!0,style:ne,activeStyle:{background:"red"}},"Home"),r.a.createElement(W.b,{to:"/search_featured_event",exact:!0,style:ne,activeStyle:{background:"red"}},"Featured Events"),r.a.createElement(W.b,{to:"/search_businesses",exact:!0,style:ne,activeStyle:{background:"red"}},"Search Foods"),r.a.createElement(W.b,{to:"/signup",exact:!0,style:ne,activeStyle:{background:"red"}},"Sign Up"),r.a.createElement(W.b,{to:"/login",exact:!0,style:ne,activeStyle:{background:"red"}},"Log In"))}),null),r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{exact:!0,path:"/",component:function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement("h1",{className:"home-h1"}," Welcome to My Clone of Yelp!"))}}),r.a.createElement(M.a,{exact:!0,path:"/search_featured_event",component:K}),r.a.createElement(M.a,{exact:!0,path:"/search_businesses",component:Z}),r.a.createElement(M.a,{exact:!0,path:"/signup",component:X}),r.a.createElement(M.a,{exact:!0,path:"/login",component:ee})))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.c8de9f93.chunk.js.map