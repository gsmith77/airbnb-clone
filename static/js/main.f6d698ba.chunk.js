(window["webpackJsonpyelp-clone"]=window["webpackJsonpyelp-clone"]||[]).push([[0],{28:function(e,t,n){},33:function(e,t,n){e.exports=n(47)},38:function(e,t,n){},39:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(20),c=n.n(s),l=(n(38),n(1)),i=n(2),o=n(4),u=n(3),m=n(5),p=(n(39),n(8)),h=n(7),b=n(30),f=n.n(b),d=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.changeRating=function(e){n.setState({rating:e})},n.handleSubmit=function(e){e.preventDefault(),n.props.postReview(n.state),n.setState({text:"",rating:1})},n.state={text:"",rating:1,business:n.props.business},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Leave Review"),r.a.createElement("input",{type:"text",name:"text",value:this.state.text,onChange:this.handleChange}),r.a.createElement(f.a,{min:1,max:5,name:"rating",value:this.state.rating,onChange:this.changeRating}),r.a.createElement("input",{type:"submit",value:"Add Review"})))}}]),t}(a.Component),E=Object(h.b)(null,{postReview:function(e){return function(t){var n=JSON.parse(localStorage.currentUser),a=n.first_name+" "+n.last_name;return e.user=n,e.user_name=a,fetch("http://localhost:3000/api/v1/reviews",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({review:e})}).then((function(e){return e.json()})).then((function(e){}))}}})(d),g=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"reviews"},e.props.reviews.filter((function(t){return t.businessId===e.props.business.id})).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{style:{width:"300px"},key:e.id},r.a.createElement("h4",null,e.user?e.user.name:e.user_name),"\n",r.a.createElement("p",null,"Rating: ",e.rating),"\n",r.a.createElement("p",null,e.text)))})),r.a.createElement(E,{business:this.props.business}))}}]),t}(a.Component),O=Object(h.b)((function(e){return{businesses:e.businesses.businesses}}))(g),v=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ol",{id:"allReviews",style:{borderTop:"3px solid rgb(100, 100, 100)",borderBottom:"3px solid rgb(100, 100, 100)"}},r.a.createElement(O,{business:this.props.business,reviews:this.props.reviews})))}}]),t}(a.Component),j=Object(h.b)((function(e){return{reviews:e.businesses.reviews}}))(v),y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.preventDefault(),n.props.fetchReviews({id:n.props.business.id,name:n.props.business.name})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.business;return r.a.createElement("div",null,r.a.createElement("li",{align:"left",key:e.id},r.a.createElement("h4",null,e.name),r.a.createElement("img",{style:{align:"left",width:"500px"},alt:"single business",id:e.name,src:e.image_url}),r.a.createElement("br",null),r.a.createElement("section",null,"Price: ",e.price,r.a.createElement("br",null),"Total Reviews:",e.review_count,r.a.createElement("br",null),"Categories: ",e.categories.map((function(e){return r.a.createElement("ul",{key:e.id}," - ",e.title)})),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("button",{style:{padding:"15px 32px",textalign:"center",display:"inline-block",fontsize:"16px"},onClick:this.handleClick},"Reviews"),r.a.createElement(j,{business:e})))}}]),t}(a.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("ol",{id:"list-of-businesses",style:{margin:10}},e.props.businesses.map((function(t){return r.a.createElement(y,{key:t.id,business:t,fetchReviews:e.props.fetchReviews})}))))}}]),t}(a.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"businesses",style:{display:"inline-block"}},r.a.createElement(w,{businesses:this.props.businesses,fetchReviews:this.props.fetchReviews}))}}]),t}(a.Component),C=Object(h.b)((function(e){return{businesses:e.businesses.businesses}}),{fetchReviews:function(e){return function(t){if(t({type:"LOADING_REVIEWS"}),e.name.includes("&")){var n=e.name.indexOf("&"),a=e.name.slice(0,n),r=e.name.slice(n+1,e.name.length);return fetch("http://localhost:3000/api/v1/business_reviews?id=".concat(e.id,"&firstHalf=").concat(a,"&andSign=").concat(" and ","&secondHalf=").concat(r)).then((function(e){return e.json()})).then((function(n){t({type:"FETCH_REVIEWS",payload:[n,e.id]})}))}return fetch("http://localhost:3000/api/v1/business_reviews?id=".concat(e.id,"&name=").concat(e.name)).then((function(e){return e.json()})).then((function(n){t({type:"FETCH_REVIEWS",payload:[n,e.id]})}))}}})(S),N=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t={align:"left",width:"500px"};return r.a.createElement("div",null,e.props.events.map((function(e){return"string"===typeof e.name?r.a.createElement("li",{style:t,key:e.id},r.a.createElement("h2",null,e.name),r.a.createElement("img",{alt:"See your Event Live!",src:e.image_url}),r.a.createElement("p",null,e.attending_count," guest(s) are attending","\n",e.description),r.a.createElement("p",null,"From ",e.time_start," to ",e.time_end)):r.a.createElement("div",null)})))}}]),t}(a.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"events-container"},r.a.createElement("ol",{id:"list-of-events"},r.a.createElement(N,{events:this.props.events})))}}]),t}(a.Component),k=Object(h.b)((function(e){return{events:e.events.events}}))(_),x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(e){localStorage.removeItem("currentUser"),n.props.logOutUser(e)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.currentUser;return null!==t?r.a.createElement("div",{id:"userShowPage"},r.a.createElement("h1",null,t.email),"\n",r.a.createElement("button",{onClick:function(){return e.logout(t.id)}},"Log Out")):null}}]),t}(r.a.Component),P=Object(h.b)(null,{logOutUser:function(e){return function(t){return fetch("http://localhost:3000/api/v1/logout?id=".concat(e)).then((function(e){return e.json()})).then((function(e){alert(e.message),t({type:"LOGOUT_USER"})}))}}})(x),U=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(C,null),r.a.createElement(k,null),null!==this.props.currentUser?r.a.createElement(P,{currentUser:this.props.currentUser}):null)}}]),t}(a.Component),I=Object(h.b)((function(e){return{currentUser:e.user.currentUser}}))(U),R=n(16),D=n(31);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(19);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=Object(R.c)({businesses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,businesses:[],reviews:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_BUSINESSES":return Object.assign({},F({},e),{loading:!0});case"FETCH_BUSINESSES":return F({},e,{businesses:[].concat(Object(L.a)(e.businesses),[t.payload]).flat(),loading:!1});case"LOADING_REVIEWS":return Object.assign({},F({},e),{loading:!0});case"FETCH_REVIEWS":var n=t.payload[0].map((function(e){return F({},e,{businessId:t.payload[1]})}));return F({},e,{reviews:[].concat(Object(L.a)(e.reviews),[n]).flat(),loading:!1});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,events:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_EVENT":return Object.assign({},H({},e),{loading:!0});case"FETCH_EVENT":return H({},e,{events:[].concat(Object(L.a)(e.events),[t.payload]).flat(),loading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return B({},e,{currentUser:t.payload});case"LOGOUT_USER":default:return B({},e,{currentUser:null})}}}),W=n(17),J=n(15),Y=(n(44),{term:"",location:""}),z=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.fetchBusinesses(n.state),n.setState(Y)},n.state={term:"",location:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"input"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"search-businesses-input"},r.a.createElement("h1",null," PUT A TITLE HERE FOR SEARCHING FOODS"),r.a.createElement("h2",{className:"looking-for-header"},"What Are You Looking For?"),r.a.createElement("input",{className:"looking-for-inputbox",type:"text",name:"term",value:this.state.term,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("h2",{className:"location-header"},"Location:"),r.a.createElement("input",{className:"location-inputbox",type:"text",name:"location",value:this.state.location,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit"})))}}]),t}(a.Component),M=Object(h.b)(null,{fetchBusinesses:function(e){return function(t){return t({type:"LOADING_BUSINESSES"}),fetch("http://localhost:3000/api/v1/search_businesses?term=".concat(e.term,"&location=").concat(e.location)).then((function(e){return e.json()})).then((function(e){t({type:"FETCH_BUSINESSES",payload:e})}))}}})(z),Z=(n(45),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.fetchEvents(e.state),e.setState({location:""})},e.state={location:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"event-input-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"zipcode-label"},"Enter Your Zip Code, City or State to find The Featured Events Near You!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{className:"location-label"},"Location:"),r.a.createElement("input",{className:"location-inputbox",type:"text",name:"location",value:this.state.location,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{className:"submit-button",type:"submit"})))}}]),t}(a.Component)),$=Object(h.b)(null,{fetchEvents:function(e){return function(t){return t({type:"LOADING_EVENT"}),fetch("http://localhost:3000/api/v1/search_events?location=".concat(e.location)).then((function(e){return e.json()})).then((function(e){return t({type:"FETCH_EVENT",payload:e})}))}}})(Z),q=(n(28),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createUser(e.state),e.setState({first_name:"",last_name:"",email:"",password:""})},e.state={first_name:"",last_name:"",email:"",password:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup-form"},r.a.createElement("h1",null,"Sign Up For An Account"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{name:"first_name",placeholder:"First Name",value:this.state.first_name,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{name:"last_name",placeholder:"Last Name",value:this.state.last_name,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Sign Up"})))}}]),t}(a.Component)),K=Object(h.b)(null,{createUser:function(e){return function(t){return fetch("http://localhost:3000/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){e.message?e.message.email&&e.message.password?alert("Email & Password ".concat(e.message.password[0])):e.message.email?alert("Email ".concat(e.message.email[0])):e.message.password&&alert("Password ".concat(e.message.password[0])):(localStorage.setItem("currentUser",JSON.stringify(e)),t({type:"LOGIN_USER",payload:e}))}))}}})(q),Q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.loginUser(e.state),e.setState({email:"",password:""})},e.state={email:"",password:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"login-header"},"Login"),r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Log In"})))}}]),t}(a.Component),X=Object(h.b)(null,{loginUser:function(e){return function(t){return e.email=e.email.slice(0,e.email.length-4),fetch("http://localhost:3000/api/v1/users/".concat(JSON.stringify({user:e}))).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):(localStorage.setItem("currentUser",JSON.stringify(e)),t({type:"LOGIN_USER",payload:e}))}))}}})(Q),ee=Object(R.d)(V,Object(R.a)(D.a)),te={width:"100px",padding:"12px",margin:"0 6px 6px",background:"black",textDecoration:"none",color:"white",position:"relative"};c.a.render(r.a.createElement(h.a,{store:ee},r.a.createElement(I,null),r.a.createElement(W.a,null,r.a.createElement((function(){return r.a.createElement("div",{id:"navbar"},r.a.createElement(W.b,{to:"/",exact:!0,style:te,activeStyle:{background:"red"}},"Home"),r.a.createElement(W.b,{to:"/search_featured_event",exact:!0,style:te,activeStyle:{background:"red"}},"Featured Events"),r.a.createElement(W.b,{to:"/search_businesses",exact:!0,style:te,activeStyle:{background:"red"}},"Search Foods"),r.a.createElement(W.b,{to:"/signup",exact:!0,style:te,activeStyle:{background:"red"}},"Sign Up"),r.a.createElement(W.b,{to:"/login",exact:!0,style:te,activeStyle:{background:"red"}},"Log In"))}),null),r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{exact:!0,path:"/",component:function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement("h1",{className:"home-h1"}," Welcome to My Clone of Yelp!"),r.a.createElement("h3",{className:"subtitle-h3"}," Hurry up and Search something! I am getting hungry!"))}}),r.a.createElement(J.a,{exact:!0,path:"/search_featured_event",component:$}),r.a.createElement(J.a,{exact:!0,path:"/search_businesses",component:M}),r.a.createElement(J.a,{exact:!0,path:"/signup",component:K}),r.a.createElement(J.a,{exact:!0,path:"/login",component:X})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.f6d698ba.chunk.js.map